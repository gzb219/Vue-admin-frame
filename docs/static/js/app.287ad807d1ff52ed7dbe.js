webpackJsonp([7],{0:function(t,e,n){n("j1ja"),t.exports=n("NHnr")},"7Otq":function(t,e,n){t.exports=n.p+"static/img/logo.75c2acc.png"},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("7+uW"),r=(n("uMhA"),n("zL8q")),i=n.n(r),s=(n("faPT"),n("sfy8"),n("rEBu"),n("/ocq")),o=n("Dd8w"),c=n.n(o),u=n("NYxO"),d={name:"SidebarItems",props:{routes:{type:Array}},methods:{expandSubMenu:function(t){"expanded"===t.classList[1]?t.classList.remove("expanded"):t.classList.add("expanded")}}},l={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{staticClass:"sidebar-menu"},[t._l(t.routes,function(e,a){return e.hidden?t._e():[e.children.length<=1?n("li",{staticClass:"menu-item"},[n("router-link",{staticClass:"item-link",attrs:{to:e.path+"/"+e.children[0].path}},[n("svg",{staticClass:"icon-svg",attrs:{"aria-hidden":"true"}},[n("use",{attrs:{"xlink:href":"#if-"+e.children[0].meta.icon}})]),t._v(" "),n("cite",[t._v(t._s(e.children[0].meta.title))])])],1):n("li",{staticClass:"menu-item"},[n("a",{staticClass:"item-link",on:{click:function(e){e.preventDefault(),t.expandSubMenu(t.$refs["subMenu"+a][0])}}},[n("svg",{staticClass:"icon-svg",attrs:{"aria-hidden":"true"}},[n("use",{attrs:{"xlink:href":"#if-"+e.meta.icon}})]),t._v(" "),n("cite",[t._v(t._s(e.meta.title))])]),t._v(" "),n("div",{ref:"subMenu"+a,refInFor:!0,staticClass:"menu-subs"},t._l(e.children,function(e){return n("router-link",{key:e.path,staticClass:"subs-item",attrs:{to:e.path}},[t._v("\n          "+t._s(e.meta.title)+"\n        ")])}))])]})],2)},staticRenderFns:[]},h=n("VU/8")(d,l,!1,null,null,null).exports,f={name:"Sidebar",data:function(){return{logo:n("7Otq")}},computed:c()({},Object(u.b)(["permission_routes"])),components:{SidebarMenu:h}},p={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container-sidebar app-sidebar"},[e("div",{staticClass:"app-brand"},[e("img",{staticClass:"logo",attrs:{src:this.logo,alt:""}}),this._v(" "),e("span",{staticClass:"title"},[this._v("Vue Admin")])]),this._v(" "),e("sidebar-menu",{attrs:{routes:this.permission_routes}})],1)},staticRenderFns:[]},m=n("VU/8")(f,p,!1,null,null,null).exports,v={name:"HeaderBar",computed:{sidebarOpend:function(){return this.$store.state.application.sidebar.opened},username:function(){return this.$store.state.user.username},avatar:function(){return this.$store.state.user.avatar}},methods:{toggleSidebar:function(){this.$store.dispatch("app_toggle_sidebar")},handleRefresh:function(t){var e=t.target;"svg"!==e.tagName&&(e="A"===e.tagName?e.childNodes[0]:e.parentNode),"doing"!==e.classList[2]&&(e.classList.add("doing"),setTimeout(function(){e.classList.remove("doing")},6e3))},handleSearch:function(t){t.preventDefault();var e=t.target;"INPUT"!==e.tagName&&((e=e.parentNode.parentNode.parentNode.childNodes)[0].tagName||(e=e[1])),console.log("handle navigation bar search form! The input value is => '"+e.value+"'")},handleCommand:function(t){switch(t){case"user":case"setting":break;case"logout":this.handleLogout()}},handleLogout:function(){var t=this;t.$confirm("确认退出当前账户？","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$store.dispatch("user_logout").then(function(){location.reload()})}).catch(function(){})}}},_={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-header"},[n("div",{staticClass:"header-nav nav-left"},[n("a",{staticClass:"nav-item",on:{click:function(e){return e.preventDefault(),t.toggleSidebar(e)}}},[n("svg",{staticClass:"icon-svg",attrs:{"aria-hidden":"true"}},[n("use",{attrs:{"xlink:href":t.sidebarOpend?"#if-handle-close":"#if-handle-expand"}})])]),t._v(" "),n("a",{staticClass:"nav-item open-in-browser hidden-xs-only"},[n("svg",{staticClass:"icon-svg",attrs:{"aria-hidden":"true"}},[n("use",{attrs:{"xlink:href":"#if-handle-browse"}})])]),t._v(" "),n("a",{staticClass:"nav-item",on:{click:function(e){return e.preventDefault(),t.handleRefresh(e)}}},[n("svg",{staticClass:"icon-svg handle-refresh",attrs:{"aria-hidden":"true"}},[n("use",{attrs:{"xlink:href":"#if-handle-refresh-half"}})])])]),t._v(" "),n("div",{staticClass:"header-forms hidden-xs-only"},[n("el-input",{attrs:{placeholder:"搜索..."},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.handleSearch(e):null}}},[n("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},on:{click:function(e){return e.preventDefault(),t.handleSearch(e)}},slot:"suffix"})])],1),t._v(" "),n("div",{staticClass:"header-nav nav-right"},[n("el-dropdown",{on:{command:t.handleCommand}},[n("a",{staticClass:"nav-item link-user"},[n("div",{staticClass:"avatar"},[n("img",{attrs:{src:t.avatar,alt:t.username}})])]),t._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"user"}},[t._v("个人中心")]),t._v(" "),n("el-dropdown-item",{attrs:{command:"setting"}},[t._v("帐号设置")]),t._v(" "),n("el-dropdown-item",{attrs:{command:"logout",divided:""}},[t._v("退出登录")])],1)],1)],1)])},staticRenderFns:[]},g=n("VU/8")(v,_,!1,null,null,null).exports,b={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-tabbar"},[n("router-link",{staticClass:"tabbar-item",attrs:{to:"/dashboard"}},[n("svg",{staticClass:"icon-svg"},[n("use",{attrs:{"xlink:href":"#if-home","aria-hidden":"true"}})])]),t._v(" "),t._l(Array.from(t.visited),function(e){return n("router-link",{key:e.path,staticClass:"tabbar-item",attrs:{to:e.path}},[t._v("\n    "+t._s(e.name)+"\n    "),n("svg",{staticClass:"icon-svg icon-close",on:{click:function(n){n.preventDefault(),t.closeTab(e)}}},[n("use",{attrs:{"xlink:href":"#if-close","aria-hidden":"true"}})])])})],2)},staticRenderFns:[]},E=n("VU/8")({name:"TabBar",computed:{visited:function(){return this.$store.getters.tabs_visited}},watch:{$route:function(){this.addTab()}},mounted:function(){this.addTab()},methods:{isActive:function(t){return t.path===this.$route.path},addTab:function(){var t=this.$route;t.name&&"/dashboard"!==t.path&&this.$store.dispatch("tabs_add",t)},closeTab:function(t){var e=this;this.$store.dispatch("tabs_del",t).then(function(n){if(e.isActive(t)){var a=n.splice(-1)[0];e.$router.push(a?a.path:"/")}})}}},b,!1,null,null,null).exports,S={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"app-main"},[e("router-view")],1)},staticRenderFns:[]},T=n("VU/8")({name:"AppMain"},S,!1,null,null,null).exports,R={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"app-footer"},[this._v("Footer Bar")])},staticRenderFns:[]},k=n("VU/8")({name:"FooterBar"},R,!1,null,null,null).exports,A=n("BO1k"),C=n.n(A),y=n("d7EF"),x=n.n(y),w=n("lbHh"),U=n.n(w),O={state:{language:U.a.get("language")||"zh",device:"desktop",sidebar:{opened:!+U.a.get("sidebarStatus"),withoutAnimation:!0}},mutations:{APP_TOGGLE_SIDEBAR:function(t){U.a.set("sidebarStatus",t.sidebar.opened?1:0),t.sidebar.opened=!t.sidebar.opened,t.sidebar.withoutAnimation=!0},APP_TOGGLE_DEVICE:function(t,e){t.device=e}},actions:{app_toggle_sidebar:function(t){(0,t.commit)("APP_TOGGLE_SIDEBAR")},app_toggle_device:function(t,e){(0,t.commit)("APP_TOGGLE_DEVICE",e)}}},N=n("//Fk"),D=n.n(N),M=n("mtWM"),$="Admin-Token";function B(){return U.a.get($)}function L(){return U.a.remove($)}var V=n.n(M).a.create({baseURL:"https://prods.api.com",timeout:6e3});V.interceptors.request.use(function(t){return K.getters.token&&(V.defaults.headers["X-Token"]=B()),t},function(t){return D.a.reject(t)}),V.interceptors.response.use(function(t){return t},function(t){return console.log("response"+t),Object(r.Message)({message:t.message,type:"error",duration:5e3}),D.a.reject(t)});var I=V;var P={state:{code:"",status:"",token:B(),expire:7,username:"",avatar:"",introduction:"",roles:[]},mutations:{USER_SET_CODE:function(t,e){t.code=e},USER_SET_STAT:function(t,e){t.status=e},USER_SET_TOKEN:function(t,e){t.token=e},USER_SET_NAME:function(t,e){t.username=e},USER_SET_AVATAR:function(t,e){t.avatar=e},USER_SET_INTR:function(t,e){t.introduction=e},USER_SET_ROLS:function(t,e){t.roles=e}},actions:{user_login:function(t,e){var n=t.commit,a=t.state;return new D.a(function(t,r){var i,s;(i=e.username.trim(),s=e.password,I({url:"/login/login",method:"post",data:{username:i,password:s}})).then(function(r){var i,s;n("USER_SET_TOKEN",r.data.token),i=r.data.token,(s=e.remember?a.expire:null)?U.a.set($,i,{expires:s}):U.a.set($,i),t()}).catch(function(t){r(t)})})},user_info:function(t){var e=t.commit,n=t.state;return new D.a(function(t,a){var r;(r=n.token,I({url:"user/info",method:"get",params:{token:r}})).then(function(n){n.data||a(new Error("error"));var r=n.data;r.roles&&r.roles.length>0?e("USER_SET_ROLS",r.roles):a(new Error("userInfo: roles must be a non-null array !")),e("USER_SET_NAME",r.username),e("USER_SET_CODE",r.code),e("USER_SET_STAT",n.data.status),e("USER_SET_AVATAR",r.avatar),e("USER_SET_INTR",r.introduction),t(n)}).catch(function(t){a(t)})})},user_logout:function(t){var e=t.commit,n=t.state;return new D.a(function(t,a){(n.token,I({url:"/login/logout",method:"post"})).then(function(){e("USER_SET_TOKEN",""),e("USER_SET_NAME",""),e("USER_SET_CODE",""),e("USER_SET_STAT",""),e("USER_SET_AVATAR",""),e("USER_SET_INTR",""),e("USER_SET_ROLS",[]),L(),t()}).catch(function(t){a(t)})})},user_logout_fed:function(t){var e=t.commit;return new D.a(function(t){e("USER_SET_TOKEN",""),L(),t()})}}},F=[];var z={state:{routes:Z,addRoutes:[]},mutations:{PERM_SET_ROUTERS:function(t,e){t.addRoutes=e,t.routes=Z.concat(e)}},actions:{perm_generate_routes:function(t,e){var n=t.commit;return new D.a(function(t){var a=e.roles,r=void 0;r=a.indexOf("admin")>=0?F:function t(e,n){return e.filter(function(e){return!!function(t,e){return!e.meta||!e.meta.roles||t.some(function(t){return e.meta.roles.indexOf(t)>=0})}(n,e)&&(e.children&&e.children.length&&(e.children=t(e.children,n)),!0)})}(F,a),n("PERM_SET_ROUTERS",r),t()})}}},G=n("Gu7T"),j=n.n(G),H={state:{visited:[],cached:[]},mutations:{TABS_ADD:function(t,e){t.visited.some(function(t){return t.path===e.path})||(t.visited.push({name:e.name,path:e.path,title:e.meta.title||"no-name"}),e.meta.nocache||t.cached.push(e.name))},TABS_DEL:function(t,e){var n=!0,a=!1,r=void 0;try{for(var i,s=C()(t.visited.entries());!(n=(i=s.next()).done);n=!0){var o=i.value,c=x()(o,2),u=c[0];if(c[1].path===e.path){t.visited.splice(u,1);break}}}catch(t){a=!0,r=t}finally{try{!n&&s.return&&s.return()}finally{if(a)throw r}}var d=!0,l=!1,h=void 0;try{for(var f,p=C()(t.cached.entries());!(d=(f=p.next()).done);d=!0){var m=f.value,v=x()(m,2),_=v[0];if(v[1]===e.name){t.cached.splice(_,1);break}}}catch(t){l=!0,h=t}finally{try{!d&&p.return&&p.return()}finally{if(l)throw h}}},TABS_DEL_OTHERS:function(t,e){var n=!0,a=!1,r=void 0;try{for(var i,s=C()(t.visited.entries());!(n=(i=s.next()).done);n=!0){var o=i.value,c=x()(o,2),u=c[0];if(c[1].path===e.path){t.visited=t.visited.splice(u,1);break}}}catch(t){a=!0,r=t}finally{try{!n&&s.return&&s.return()}finally{if(a)throw r}}var d=!0,l=!1,h=void 0;try{for(var f,p=C()(t.cached.entries());!(d=(f=p.next()).done);d=!0){var m=f.value,v=x()(m,2),_=v[0];if(v[1]===e.name){t.cached=t.cached.splice(_,1);break}}}catch(t){l=!0,h=t}finally{try{!d&&p.return&&p.return()}finally{if(l)throw h}}},TABS_EMPTY:function(t){t.visited=[],t.cached=[]}},actions:{tabs_add:function(t,e){(0,t.commit)("TABS_ADD",e)},tabs_del:function(t,e){var n=t.commit,a=t.state;return new D.a(function(t){n("TABS_DEL",e),t([].concat(j()(a.visited)))})},tabs_del_others:function(t,e){var n=t.commit,a=t.state;return new D.a(function(t){n("TABS_DEL_OTHERS",e),t([].concat(j()(a.visited)))})},tabs_empty:function(t){var e=t.commit,n=t.state;return new D.a(function(t){e("TABS_EMPTY"),t([].concat(j()(n.visited)))})}}},q={user:function(t){return t.user},token:function(t){return t.user.token},roles:function(t){return t.user.roles},permission_routes:function(t){return t.permission.routes},addRoutes:function(t){return t.permission.addRoutes},tabs_visited:function(t){return t.tabs.visited},tabs_cached:function(t){return t.tabs.cached}};a.default.use(u.a);var K=new u.a.Store({modules:{application:O,user:P,permission:z,tabs:H},getters:q}),Y=document.body,J={name:"Layout",components:{Sidebar:m,HeaderBar:g,TabBar:E,AppMain:T,FooterBar:k},mixins:[{beforeMount:function(){var t=document.body.querySelectorAll("svg")[0].querySelectorAll("path"),e=!0,n=!1,a=void 0;try{for(var r,i=C()(t.entries());!(e=(r=i.next()).done);e=!0){var s=r.value;t[x()(s,1)[0]].removeAttribute("fill")}}catch(t){n=!0,a=t}finally{try{!e&&i.return&&i.return()}finally{if(n)throw a}}window.addEventListener("resize",this.resizeHandler)},mounted:function(){this.isMobile()&&K.dispatch("app_toggle_device","mobile")},methods:{isMobile:function(){return Y.getBoundingClientRect().width<992},resizeHandler:function(){var t=this.isMobile();K.dispatch("app_toggle_device",t?"mobile":"desktop")}}}],computed:{sidebarOpend:function(){return this.$store.state.application.sidebar.opened}},methods:{toggleSidebar:function(){this.$store.dispatch("app_toggle_sidebar")}}},W={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-wrapper",class:t.sidebarOpend?"sidebar-expanded":""},[n("sidebar"),t._v(" "),n("div",{staticClass:"container-main"},[n("header-bar"),t._v(" "),n("tab-bar"),t._v(" "),n("app-main"),t._v(" "),n("footer-bar")],1),t._v(" "),n("div",{staticClass:"sidebar-backdrop",on:{click:function(e){return e.preventDefault(),t.toggleSidebar(e)}}})],1)},staticRenderFns:[]},X=n("VU/8")(J,W,!1,null,null,null).exports,Z=[{path:"/login",component:function(){return n.e(0).then(n.bind(null,"7q4a"))},hidden:!0},{path:"/404",component:function(){return n.e(2).then(n.bind(null,"MaoZ"))},hidden:!0},{path:"",component:X,redirect:"/dashboard",children:[{path:"dashboard",name:"dashboard",component:function(){return n.e(3).then(n.bind(null,"hTsr"))},meta:{title:"Dashboard",icon:"home",nocache:!0}}]},{path:"",component:X,redirect:"/guide",children:[{path:"guide",name:"guide",component:function(){return n.e(1).then(n.bind(null,"grlg"))},meta:{title:"Guide",icon:"zhiyin",nocache:!0}}]},{path:"",component:X,redirect:"/avatar-upload",meta:{title:"Component",icon:"yingyong"},children:[{path:"avatar-upload",name:"avatar upload",component:function(){return n.e(5).then(n.bind(null,"pryO"))},meta:{title:"AvatarUpload",nocache:!0}},{path:"dropzone",name:"dropzone",component:function(){return n.e(4).then(n.bind(null,"7h+k"))},meta:{title:"Dropzone",nocache:!0}}]}];a.default.use(s.a);var Q=new s.a({linkExactActiveClass:"active",routes:Z}),tt=(n("UVIz"),n("Y81h")),et=n.n(tt);et.a.configure({showSpinner:!1});var nt=["/login","/authredirect"];Q.beforeEach(function(t,e,n){et.a.start(),B()?"/login"===t.path?(n({path:"/"}),et.a.done()):0===K.getters.roles.length?K.dispatch("user_info").then(function(e){var a=e.data.roles;K.dispatch("perm_generate_routes",{roles:a}).then(function(){Q.addRoutes(K.getters.addRoutes),n(c()({},t,{replace:!0}))})}).catch(function(t){K.dispatch("user_logout_fed").then(function(){r.Message.error(t.message||"Verification failed, please login again"),n({path:"/"})})}):n():-1!==nt.indexOf(t.path)?n():(n("/login"),et.a.done())}),Q.afterEach(function(){et.a.done()});var at={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]},rt=n("VU/8")({name:"App"},at,!1,null,null,null).exports,it=n("zNUS"),st=n.n(it);var ot={admin:{roles:["admin"],token:"admin",code:"23429jahfaskjhdlf",introduction:"I'm super manager",avatar:"./static/avatar.png",username:"Super Admin",status:1},editor:{roles:["editor"],token:"editor",code:"asdf542342asdasf3",introduction:"I'm a editor",avatar:"./static/avatar.png",name:"Normal Editor",status:1}},ct=function(t){var e=JSON.parse(t.body).username;return ot[e]},ut=function(t){var e,n,a=(e=t.url,(n=e.split("?")[1])?JSON.parse('{"'+decodeURIComponent(n).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}'):{}).token;return!!ot[a]&&ot[a]},dt=function(){return"success"};st.a.mock(/\/login\/login/,"post",ct),st.a.mock(/\/login\/logout/,"post",dt),st.a.mock(/\/user\/info\.*/,"get",ut),a.default.use(i.a,{size:"small"}),a.default.config.productionTip=!1,new a.default({el:"#app",router:Q,store:K,components:{App:rt},template:"<App/>"})},UVIz:function(t,e){},faPT:function(t,e){},rEBu:function(t,e){},sfy8:function(t,e){},uMhA:function(t,e){}},[0]);