(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-51d5"],{R6lm:function(t,e,a){"use strict";var l=a("JrP0");e.a={list:function(t){var e={page:t.page,size:t.size,title:t.title,level:t.level,status:t.status};return l.a.post("/articles/list",e).then(function(t){return t.data})},detail:function(t){var e={id:t};return l.a.get("/articles/detail",{params:e}).then(function(t){return t.data})},update:function(t){return l.a.post("/articles/update",t).then(function(t){return t.data})},updates:function(t){return l.a.post("/articles/batch",t).then(function(t){return t.data})},auditors:function(){return l.a.post("/account/auditors").then(function(t){return t.data})}}},ZKxn:function(t,e,a){},dQHG:function(t,e,a){"use strict";var l=a("ZKxn");a.n(l).a},kiNf:function(t,e,a){"use strict";a.r(e);var l=a("nTMx"),s=a("R6lm"),i={name:"FullFeature",metaInfo:{title:"Sortable table"},mixins:[l.a],data:function(){return{filterData:{title:"",status:"",level:""},statusMap:["all","draft","committed","failing","auditing","audited","deleted"],levelMap:["all",1,2,3,4,5],selected:[],dialogVisible:!1,auditors:[],editForm:null}},created:function(){this.rebuildEditData()},mounted:function(){var e=this;s.a.auditors().then(function(t){e.auditors=t.map(function(t){return e.$set(t,"value",t.username),t})})},methods:{getList:function(){var e=this;this.loading=!0,s.a.list(Object.assign({},this.pages,this.filterData)).then(function(t){e.list=t.list.map(function(t){return e.$set(t,"editing",!1),e.$set(t,"submitting",!1),e.$set(t,"originalTitle",t.title),t}),e.pages=t.pages,e.loading=!1})},handleSelectionChange:function(t){this.selected=t},rebuildEditData:function(){this.editForm={isEdit:!1,author:this.$store.getters.user.username,title:"",summery:"",content:"",level:"",auditor:""}},handleEdit:function(t){this.dialogVisible=!0,t?this.editForm=Object.assign({},t):this.rebuildEditData()},inputQueryFilter:function(e){return function(t){return 0===t.value.toLowerCase().indexOf(e.toLowerCase())}},inputQuerySearch:function(t,e){e(t?this.auditors.filter(this.inputQueryFilter(t)):this.auditors)},handleBatchUpdate:function(e,a){var l=this,i={status:e?"audited":"deleted"},n=[];a?n=[Object.assign({},a,i)]:this.selected.forEach(function(t){n.push(Object.assign({},t,i))});var t={type:e?"info":"warning",confirmButtonText:"Sure, Go Ahead",cancelButtonText:"Cancel",callback:function(t){"confirm"===t&&s.a.updates(n).then(function(t){l.$message({center:!0,type:t.success?"success":"error",message:"".concat(e?"Audit":"Delete"," executed ").concat(t.success?"successfully":"failed",".")}),t.success&&(a?a.status=i.status:l.selected.forEach(function(t,e){l.selected[e].status=i.status}))})}};this.$confirm("Are you sure you want to ".concat(e?"audit":"delete"," ").concat(1<n.length?"these":"this"," data?"),"Are you sure?",t)}}},n=(a("dQHG"),a("KHd+")),o=Object(n.a)(i,function(){var a=this,t=a.$createElement,l=a._self._c||t;return l("div",{staticClass:"va-body-container"},[l("el-form",{ref:"formFilter",staticClass:"filter-and-actions",attrs:{model:a.filterData,inline:""}},[l("el-form-item",[l("el-input",{attrs:{placeholder:"Title",clearable:""},model:{value:a.filterData.title,callback:function(t){a.$set(a.filterData,"title",t)},expression:"filterData.title"}})],1),a._v(" "),l("el-form-item",[l("el-select",{staticStyle:{width:"120px"},attrs:{value:"",placeholder:"Status"},model:{value:a.filterData.status,callback:function(t){a.$set(a.filterData,"status",t)},expression:"filterData.status"}},a._l(a.statusMap,function(t,e){return l("el-option",{key:t,attrs:{label:t,value:0===e?null:t}})}),1)],1),a._v(" "),l("el-form-item",[l("el-select",{staticStyle:{width:"80px"},attrs:{value:"",placeholder:"Level"},model:{value:a.filterData.level,callback:function(t){a.$set(a.filterData,"level",t)},expression:"filterData.level"}},a._l(a.levelMap,function(t,e){return l("el-option",{key:t,attrs:{label:t,value:0===e?null:t}})}),1)],1),a._v(" "),l("el-form-item",[l("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:a.getList}},[a._v("\n        Search\n      ")])],1),a._v(" "),l("el-form-item",[l("el-button-group",{staticStyle:{"vertical-align":"top"}},[l("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){return a.handleEdit()}}},[a._v("\n          Add\n        ")]),a._v(" "),l("el-button",{attrs:{disabled:!a.selected||a.selected.length<1,type:"primary",icon:"el-icon-check"},on:{click:function(t){return a.handleBatchUpdate(!0)}}},[a._v("\n          Audit\n        ")]),a._v(" "),l("el-button",{attrs:{disabled:!a.selected||a.selected.length<1,type:"primary",icon:"el-icon-delete"},on:{click:function(t){return a.handleBatchUpdate(!1)}}},[a._v("\n          Delete\n        ")])],1)],1)],1),a._v(" "),l("el-table",{directives:[{name:"loading",rawName:"v-loading",value:a.loading,expression:"loading"}],attrs:{data:a.list,"default-sort":{prop:"id",order:"ascending"},fit:"","tooltip-effect":"theme","highlight-current-row":"","empty-text":"Sorry! This category have nothing data."},on:{"selection-change":a.handleSelectionChange}},[l("el-table-column",{attrs:{type:"selection",width:"38"}}),a._v(" "),l("el-table-column",{attrs:{label:"ID",prop:"id",width:"38",align:"right"}}),a._v(" "),l("el-table-column",{attrs:{label:"TITLE",prop:"title","show-overflow-tooltip":"",sortable:""}}),a._v(" "),l("el-table-column",{attrs:{label:"CREATE",prop:"display",width:"116",sortable:""},scopedSlots:a._u([{key:"default",fn:function(t){return[a._v("\n        "+a._s(a._f("dateAgo")(t.row.display))+"\n      ")]}}])}),a._v(" "),l("el-table-column",{attrs:{label:"AUTHOR",prop:"author",width:"104","show-overflow-tooltip":"",sortable:""}}),a._v(" "),l("el-table-column",{attrs:{label:"AUDITOR",prop:"auditor",width:"110","show-overflow-tooltip":"",sortable:""}}),a._v(" "),l("el-table-column",{attrs:{label:"LEVEL",prop:"level",width:"90",align:"center",sortable:""}}),a._v(" "),l("el-table-column",{attrs:{label:"STATUS",prop:"status",width:"100",align:"center",sortable:"","class-name":"has-actions actions-small"},scopedSlots:a._u([{key:"default",fn:function(t){return[l("el-tag",{attrs:{type:a._f("articleStatus")(t.row.status),size:"small"}},[a._v("\n          "+a._s(t.row.status)+"\n        ")])]}}])}),a._v(" "),l("el-table-column",{attrs:{label:"PV",prop:"pv",width:"66",sortable:""},scopedSlots:a._u([{key:"default",fn:function(t){return[a._v("\n        "+a._s(a._f("pageview")(t.row.pv))+"\n      ")]}}])}),a._v(" "),l("el-table-column",{attrs:{label:"ACTIONS",width:"165","class-name":"has-actions actions-small"},scopedSlots:a._u([{key:"default",fn:function(e){return[l("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-check"},on:{click:function(t){return a.handleBatchUpdate(!0,e.row)}}}),a._v(" "),l("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-edit"},on:{click:function(t){return a.handleEdit(e.row)}}}),a._v(" "),l("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-delete"},on:{click:function(t){return a.handleBatchUpdate(!1,e.row)}}})]}}])})],1),a._v(" "),a.list&&0<a.list.length?l("el-pagination",{staticClass:"excel-pagination",attrs:{"page-sizes":[10,30,50],"current-page":a.pages.page,"page-size":a.pages.size,total:a.pages.total,background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":a.handleSizeChange,"current-change":a.handlePageChange}}):a._e(),a._v(" "),l("el-dialog",{attrs:{visible:a.dialogVisible,title:"Article "+(a.editForm.isEdit?"Edit":"Add"),width:"50%"},on:{"update:visible":function(t){a.dialogVisible=t}}},[l("el-form",{staticStyle:{"margin-right":"60px"},attrs:{model:a.editForm,"label-width":"80px"}},[l("el-form-item",{attrs:{label:"Title",prop:"title"}},[l("el-input",{attrs:{placeholder:"Article title"},model:{value:a.editForm.title,callback:function(t){a.$set(a.editForm,"title",t)},expression:"editForm.title"}})],1),a._v(" "),l("el-form-item",{attrs:{label:"Summery",prop:"summery"}},[l("el-input",{attrs:{placeholder:"Article summery"},model:{value:a.editForm.summery,callback:function(t){a.$set(a.editForm,"summery",t)},expression:"editForm.summery"}})],1),a._v(" "),l("el-form-item",{attrs:{label:"Content",prop:"content"}},[l("el-input",{attrs:{placeholder:"Article content"},model:{value:a.editForm.content,callback:function(t){a.$set(a.editForm,"content",t)},expression:"editForm.content"}})],1),a._v(" "),l("el-form-item",{attrs:{label:"Level",prop:"level"}},[l("el-select",{attrs:{value:"",placeholder:"Article level"},model:{value:a.editForm.level,callback:function(t){a.$set(a.editForm,"level",t)},expression:"editForm.level"}},[a._l(a.levelMap,function(t,e){return[0!==e?l("el-option",{key:t,attrs:{label:t,value:t}}):a._e()]})],2)],1),a._v(" "),l("el-form-item",{attrs:{label:"Auditor",prop:"auditor"}},[l("el-autocomplete",{attrs:{debounce:0,"fetch-suggestions":a.inputQuerySearch,placeholder:"Article auditor"},model:{value:a.editForm.auditor,callback:function(t){a.$set(a.editForm,"auditor",t)},expression:"editForm.auditor"}})],1)],1),a._v(" "),l("div",{attrs:{slot:"footer"},slot:"footer"},[l("el-button",{attrs:{plain:""},on:{click:function(t){a.dialogVisible=!1}}},[a._v("\n        Cancel\n      ")]),a._v(" "),l("el-button",{attrs:{type:"primary"}},[a._v("\n        Submit\n      ")])],1)],1)],1)},[],!1,null,"e1d29a68",null);e.default=o.exports},nTMx:function(t,e,a){"use strict";var l=a("R6lm");e.a={data:function(){return{pages:{page:1,size:10,total:0},list:[],loading:!1}},methods:{getList:function(){var e=this;this.loading=!0,l.a.list(this.pages).then(function(t){e.list=t.list.map(function(t){return e.$set(t,"editing",!1),e.$set(t,"submitting",!1),e.$set(t,"originalTitle",t.title),t}),e.pages=t.pages,e.loading=!1})},handlePageChange:function(t){this.pages.page=t,this.getList()},handleSizeChange:function(t){this.pages.size=t,this.getList()}},mounted:function(){this.getList()}}}}]);