(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-59d698c6"],{"11db":function(e,s,t){"use strict";var n=t("8acd"),r=t.n(n);r.a},2028:function(e,s,t){},2511:function(e,s,t){"use strict";var n=t("2028"),r=t.n(n);r.a},"46fd":function(e,s,t){"use strict";t.r(s);var n=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("el-row",{staticClass:"va-body-container painted-face-demo",attrs:{gutter:15}},[t("el-col",{attrs:{span:18}},[0===e.selected?[e._v("\n      "+e._s(e.history[e.selected].word)+"\n    ")]:e._l(e.compareResult,function(s,n){return t("flag",{key:n,attrs:{user:s.user,mtime:s.mtime,type:"+"===s.type?"add":"-"===s.type?"sub":"",version:s.version,"last-version":s.lv,fragment:s.fragment,color:e.colorMap[s.version]}})})],2),e._v(" "),t("el-col",{attrs:{span:6}},[t("el-timeline",e._l(e.history,function(s,n){return t("el-timeline-item",{key:n,class:{checked:e.selected===n||-1===e.selected},attrs:{color:e.selected>-1?n===e.selected?e.colorMap[s.version]:e.colorMap[-1]:e.colorMap[s.version],icon:e.selected===n?"el-icon-check":null,timestamp:e.dateFormat(s.mtime,"yyyy.MM.dd hh:mm:ss"),placement:"top"},nativeOn:{click:function(s){e.selected=e.selected===n?-1:n}}},[t("div",[e._v("By: "),t("strong",[e._v(e._s(s.user))])]),e._v(" "),t("div",[e._v("Version: "+e._s(s.version+1))])])}),1)],1)],1)},r=[],i=(t("96cf"),t("3b8d")),a=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("span",{staticClass:"version-marker",class:"v"+("sub"===e.type?e.lastVersion:e.version),style:"add"===e.type?"background-color:"+e.color+";":"",attrs:{"oper-user":e.user,"oper-time":e.mtime,"oper-type":e.type,version:e.version,"last-version":e.lastVersion}},[e._v(e._s(e.fragment))])},p=[],o=(t("c5f6"),{name:"Flag",props:{user:{type:String,required:!0},mtime:{type:[String,Date,Number],required:!0},type:{type:String,required:!0},version:{type:Number,required:!0},lastVersion:{type:Number,required:!0},fragment:{type:String,required:!0},color:{type:String,required:!0}}}),l=o,c=(t("2511"),t("2877")),u=Object(c["a"])(l,a,p,!1,null,"38e757eb",null),g=u.exports,v=t("f46b");function m(){return v["a"].get("/articles/history")}var f=t("d225"),h=t("b0b4"),d=t("bd86"),b={},y={"==":function(e,s,t,n){var r=e[s],i=t.ranges[n],a=r.ep2,p=i.ep1;if(a>p){var o=Object.assign({},i,{user:r[b.user],version:r[b.version],lv:i[b.version]});e.splice(s,1,o);var l=i.fragment.length,c=r.fragment.substr(l),u=Object.assign({},r,{sp1:r.ep1-c.length,sp2:r.ep2-c.length,fragment:c});e.splice(s+1,0,u)}else{var g=r.fragment.length,v=Object.assign({},i,{user:r[b.user],version:r[b.version],ep1:i.sp1+g,ep2:i.sp2+g,fragment:i.fragment.substr(0,g),lv:i[b.version]});e.splice(s,1,v),t.ranges.splice(n,1,Object.assign({},v));var m=Object.assign({},i,{sp1:v.ep1,sp2:v.ep2,fragment:i.fragment.substr(g)});m.fragment.length>0&&t.ranges.splice(n+1,0,m)}},"=+":function(e,s,t,n){var r=t.ranges[n],i=Object.assign({},r,{lv:r[b.version]});e.splice(s,0,i)},"=-":function(e,s,t,n){var r=e[s],i=t.ranges[n],a=r.ep2,p=i.ep1;if(a>p){var o=i.fragment.length,l=0;if(r[b.version]!==b.initialVersion){var c=Object.assign({},r,{ep1:r.sp1+o,ep2:r.sp2+o,fragment:i.fragment});l++,e.splice(s,0,c)}var u=Object.assign({},i,{version:r[b.version],lv:i[b.version]}),g=r.fragment.substr(o),v=Object.assign({},r,{sp1:r.ep1-g.length,sp2:r.ep2-g.length,fragment:g});e.splice(s+l,1,u,v)}else{var m=r.fragment.length,f=Object.assign({},i,{ep1:i.sp1+m,ep2:i.sp2,fragment:r.fragment,lv:i[b.version]});e.splice(s,1,f),t.ranges.splice(n,1,Object.assign({},f));var h=Object.assign({},i,{sp1:f.ep1,sp2:f.ep2,fragment:i.fragment.substr(m),lv:i[b.version]});h.fragment.length>0&&t.ranges.splice(n+1,0,h)}},"+=":function(e,s,t,n){var r=e[s],i=t.ranges[n],a=r.ep2,p=i.ep1;if(a>p){var o=Object.assign({},i,{type:"+",ep1:i.sp1,user:r[b.user],version:r[b.version],lv:i[b.version]}),l=i.fragment.length,c=r.fragment.substr(l),u=Object.assign({},r,{sp2:r.ep2-c.length,fragment:c});e.splice(s,1,o,u)}else{var g=r.fragment.length,v=Object.assign({},i,{type:"+",user:r[b.user],version:r[b.version],ep1:i.sp1,ep2:i.sp2+g,fragment:r.fragment,lv:i[b.version]});e.splice(s,1,v),t.ranges.splice(n,1,Object.assign({},v));var m=i.fragment.substr(g),f=Object.assign({},i,{sp1:i.ep1-m.length,sp2:i.ep2-m.length,fragment:m});f.fragment.length>0&&t.ranges.splice(n+1,0,f)}},"++":function(e,s,t,n){var r=t.ranges[n],i=Object.assign({},r,{lv:r[b.version]});e.splice(s,0,i)},"+-":function(e,s,t,n){var r=e[s],i=t.ranges[n],a=r.ep2,p=i.ep1;if(a>p){var o=i.fragment.length,l=Object.assign({},r,{ep1:r.sp1+o,ep2:r.sp2+o,fragment:i.fragment});e.splice(s,0,l);var c=Object.assign({},i,{lv:i[b.version]}),u=r.fragment.substr(o),g=Object.assign({},r,{user:r[b.user],version:r[b.version],sp1:r.ep1,sp2:r.ep2-u.length,fragment:u});e.splice(s+1,1,c,g)}else{var v=r.fragment.length,m=Object.assign({},i,{ep1:i.sp1+v,ep2:i.sp2,fragment:r.fragment,lv:i[b.version]});e.splice(s+1,0,m),t.ranges.splice(n,1,Object.assign({},m));var f=Object.assign({},i,{sp1:m.ep1,sp2:m.ep2,fragment:i.fragment.substr(v),lv:i[b.version]});f.fragment.length>0&&t.ranges.splice(n+1,0,f)}}},O=function(){function e(){Object(f["a"])(this,e),Object(d["a"])(this,"charValueIndex",{}),Object(d["a"])(this,"sortedCharValue",[])}return Object(h["a"])(e,[{key:"buildIndex",value:function(e){for(var s=this.charValueIndex={},t=this.sortedCharValue=[],n=0,r=e.length;n<r;n++){var i=e[n],a=s[i];a?(a.show=a.show+1,a.index.push(n),this.reLocate(a.pos)):(a={show:1,pos:t.length,index:[n]},s[i]=a,t.push(i))}}},{key:"reLocate",value:function(e){var s=this.charValueIndex,t=this.sortedCharValue,n=t[e],r=s[n];while(e>0){e--;var i=t[e],a=s[i];if(a.show>=r.show)break;t[e]=n,t[e+1]=i,a.pos=e+1,r.pos=e}}}]),e}(),j=function(){function e(s){var t=s.content,n=void 0===t?"content":t,r=s.version,i=void 0===r?"version":r,a=s.mtime,p=void 0===a?"mtime":a,o=s.user,l=void 0===o?"user":o,c=s.initialVersion,u=void 0===c?1:c;Object(f["a"])(this,e),b.content=n,b.version=i,b.mtime=p,b.user=l,b.initialVersion=u,this.minMatchLength=30,this.minMatchPercent=.2,this.leftIndex=null,this.rightIndex=null}return Object(h["a"])(e,[{key:"execute",value:function(e){for(var s,t,n=0,r=e.length-1;n<r;n++)s=this.compare(e[n],e[n+1]),t=this.merge(t,s);return t}},{key:"findEqualRange",value:function(e,s,t,n){var r=e.length,i=t.length,a=s,p=n;while(a<r&&p<i){if(e[a]!==t[p])break;a++,p++}return{sp1:s,ep1:a,sp2:n,ep2:p}}},{key:"findAvailableRange",value:function(e,s,t,n,r){var i=e[s],a=r.charValueIndex[i];if(!a)return null;var p=Math.floor((e.length-s)*this.minMatchPercent);p=Math.max(Math.min(p,this.minMatchLength),1);for(var o=a.index,l=0,c=o.length;l<c;l++)if(!(o[l]<n)){var u=this.findEqualRange(e,s,t,o[l]);if(u.ep1-u.sp1>p)return u}return null}},{key:"findMatchedRange",value:function(e,s,t,n){var r=this.findAvailableRange(e,s,t,n,this.rightIndex);return r||(r=this.findAvailableRange(t,n,e,s,this.leftIndex),r?{sp1:r.sp2,ep1:r.ep2,sp2:r.sp1,ep2:r.ep1}:(r=this.findEqualRange(e,s,t,n),r.sp1!==r.ep1?r:null))}},{key:"initMergeResult",value:function(e){for(var s=[],t=e.left,n=e.right,r=e.ranges,i=0,a=r.length;i<a;i++){var p=r[i],o="+"===p.type?n:t,l=Object.assign({},p,{version:o.version,lv:n.version});s.push(l)}return s}},{key:"mergeRange",value:function(e,s,t){for(var n=s.ranges[t],r=this.mergeIndex||0;r<e.length;r++){var i=e[r];if("-"!==i.type&&(n.version-i.lv===1&&i.sp2===n.sp1))break}if(this.mergeIndex=r,r>=e.length)e.push(Object.assign({},n,{lv:n.version}));else{var a=e[r].type+n.type;y[a].call(this,e,r,s,t)}}},{key:"merge",value:function(e,s){if(!e)return this.initMergeResult(s);this.mergeIndex=0;for(var t=s.ranges,n=0;n<t.length;n++)this.mergeRange(e,s,n);return e}},{key:"compare",value:function(e,s){var t=[];if(this.rightIndex)this.leftIndex=this.rightIndex;else{var n=new O;n.buildIndex(e[b.content]),this.leftIndex=n}var r=new O;r.buildIndex(s[b.content]),this.rightIndex=r;var i=e[b.content],a=i.length,p=s[b.content],o=p.length,l=0,c=0,u=-1,g=-1;while(l<a&&c<o){var v=this.findMatchedRange(i,l,p,c);if(v){if(-1!==u&&(t.push({type:"-",sp1:u,ep1:l,sp2:g,ep2:g,user:s[b.user],mtime:s[b.mtime],version:s[b.version],fragment:i.substring(u,l)}),u=-1),l!==v.sp1&&c===v.sp2&&t.push({type:"-",sp1:l,ep1:v.sp1,sp2:-1!==g?g:c,ep2:-1!==g?g:c,user:s[b.user],mtime:s[b.mtime],version:s[b.version],fragment:i.substring(l,v.sp1)}),-1!==g){var m=p.substring(g,c),f=t[t.length-1],h=-1;-1===h&&(f=t[t.length-2],f&&"-"===f.type&&f.fragement===m&&(h=t.length-2)),t.push({type:"+",sp1:v.sp1,ep1:v.sp1,sp2:g,ep2:c,user:s[b.user],mtime:s[b.mtime],version:s[b.version],fragment:m}),g=-1}if(l===v.sp1&&c!==v.sp2&&t.push({type:"+",sp1:l,ep1:l,sp2:c,ep2:v.sp2,user:s[b.user],mtime:s[b.mtime],version:s[b.version],fragment:p.substring(c,v.sp2)}),l!==v.sp1||c!==v.sp2)if(l!==v.sp1){if(c!==v.sp2)break;v.type="=",v.user=s[b.user],v.mtime=s[b.mtime],v.version=s[b.version],v.fragment=p.substring(c,v.ep2),t.push(v),l=v.ep1,c=v.ep2}else v.type="=",v.user=s[b.user],v.mtime=s[b.mtime],v.version=s[b.version],v.fragment=i.substring(l,v.ep1),t.push(v),l=v.ep1,c=v.ep2;else v.type="=",v.user=s[b.user],v.mtime=s[b.mtime],v.version=s[b.version],v.fragment=i.substring(v.sp1,v.ep1),t.push(v),l=v.ep1,c=v.ep2}else-1===u&&(u=l,g=c),l++,c++}return-1!==u&&(t.push({type:"-",sp1:u,ep1:l,sp2:g,ep2:g,user:s[b.user],mtime:s[b.mtime],version:s[b.version],fragment:i.substring(u,l)}),u=-1),l<a&&t.push({type:"-",sp1:l,ep1:a,sp2:o,ep2:o,user:s[b.user],mtime:s[b.mtime],version:s[b.version],fragment:i.substring(l)}),-1!==g&&(t.push({type:"+",sp1:l,ep1:l,sp2:g,ep2:c,user:s[b.user],mtime:s[b.mtime],version:s[b.version],fragment:p.substring(g,c)}),g=-1),c<o&&t.push({type:"+",sp1:a,ep1:a,sp2:c,ep2:o,user:s[b.user],mtime:s[b.mtime],version:s[b.version],fragment:p.substring(c)}),{ranges:t,left:e,right:s}}}]),e}(),x=j,k=t("99c9"),w={name:"PaintedFace",components:{Flag:g},data:function(){return{history:[],compareResult:"",colorMap:{"-1":"#e4e7ed",0:"#343a40",1:"#dc4371",2:"#dc9599",3:"#dc4ab1",4:"#bf6bdc",5:"#b9a3fe",6:"#8596fe",7:"#489dfe",8:"#1ecafe",9:"#0cfecf",10:"#07fe7c",11:"#a0fe52",12:"#ecfeb5",13:"#fee439",14:"#feb280",15:"#fe7e46",16:"#fe6c08"},selected:-1}},watch:{selected:function(){this.compare()}},mounted:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m();case 2:this.history=e.sent,this.compare();case 4:case"end":return e.stop()}},e,this)}));function s(){return e.apply(this,arguments)}return s}(),methods:{compare:function(){var e=this.selected;if(0!==e){var s=-1===e?this.history:this.history.filter(function(s){return s.version===e||s.version===e-1}),t=new x({content:"word",initialVersion:0});this.compareResult=t.execute(s)}},dateFormat:k["b"]}},I=w,M=(t("11db"),Object(c["a"])(I,n,r,!1,null,"caab5dc2",null));s["default"]=M.exports},"8acd":function(e,s,t){}}]);